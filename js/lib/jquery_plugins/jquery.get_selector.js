// Generated by CoffeeScript 1.3.3

/*
Based on jQuery-GetPath v0.01, by Dave Cardwell. (2007-04-27)
Extended by Florian Plank, Polarblau (2012)
*/


(function() {

  $.fn.getSelector = function(path) {
    var id, klass, selector, tagName;
    if (path == null) {
      path = '';
    }
    if (!this.length) {
      return $.error('No element found for $.getSelector.');
    }
    if (this.is('html')) {
      return "html " + path;
    }
    selector = '';
    tagName = this.get(0).nodeName.toLowerCase();
    id = this.attr('id');
    klass = this.attr('class');
    if (id != null) {
      selector = "#" + id;
    }
    if ($(selector + path).length === 1) {
      return selector + path;
    }
    if (klass != null) {
      selector = "." + (klass.split(/[\s\n]+/).join('.'));
    }
    if ($(selector + path).length === 1) {
      return selector + path;
    }
    if (!selector.length) {
      selector = tagName;
    }
    if ($(selector + path).length === 1) {
      return selector + path;
    }
    if (this.index() > 0 && $(selector + path).length > 1) {
      selector += ":nth-child(" + (this.index()) + ")";
    }
    if ($(selector + path).length === 1) {
      return selector + path;
    }
    return this.parent().getSelector(' > ' + selector + path);
  };

}).call(this);
